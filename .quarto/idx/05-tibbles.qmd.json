{"title":"Einführung in Tibbles","markdown":{"headingText":"Einführung in Tibbles","containsRefs":false,"markdown":"\n```{r}\nlibrary(tidyverse)\n```\n\n\nIn diesem Kapitel werden wir die Grundlagen von Tibbles kennenlernen, eine moderne Datenstruktur in R, die besonders im tidyverse verwendet wird. Tibbles sind eine Weiterentwicklung der traditionellen Dataframes und bieten einige Vorteile in der Handhabung und Datenmanipulation.\n\n## Tibbles als Datentyp\n\nTibbles sind ein Objekttyp in R, entwickelt, um mit dem Tidyverse kompatibel zu sein. Im Gegensatz zu traditionellen Dataframes bieten Tibbles eine vereinfachte, aber robustere Datenmanipulation, was sie ideal für Datenanalyse macht.\n\nTibbles sind eine moderne Variante von `dataframes`. `Dataframes` sind Teil der \"Grundausstattung\" von R (auch häufig \"base-R\" genannt). Wir haben bereits in Kapitel x kurz über dataframes gesprochen, hier nochmals die Definition: \n- Dataframe: enthalten Daten, im Grunde eine flexible Matrix, die unterschiedliche Vektoren mit unterschiedlichen R-Objekten enthalten kann und organisiert ist, als hätte sie Variablen und Beobachtungen. Wir werden dies im nächsten Kapitel genauer besprechen. Dataframes kann man wie folgt erstellen: \n\n```{r}\ndf_base_r <- data.frame(\n  id = c(1,2,3,4,5,6),\n  age = c(25,30,33,NA,26,38),\n  grade = c('A','A+','B','B-','B+','A')\n)\n\nhead(df_base_r)\n```\n\n\n```{r}\n# Tibble erstellen\ndf <- tibble(id = c(1, 2, 3, 4, 5, 6),\n             age = c(25, 30, 33, NA, 26, 38),\n             grade = c('A', 'A+', 'B', 'B-', 'B+', 'A'))\n\n# Daten überprüfen\nhead(df)\n```\n\n\n## Indexierung im Allgemeinen\n\n### Indexierung mit Ganzzahlen\n\nMan kann bestimmte Elemente auswählen, indem man Ganzzahlen verwendet.\n\n```{r}\n# Erste Spalte als Tibble-Variable\ndf[1]\n\n# Erste Spalte alle Beobachtungen\ndf[, 1]\n\n# Zweite Zeile\ndf[2, ]\n\n# Spezifische Zelle (2. Beobachtung, 1. Variable)\ndf[2, 1]\n\n# Mehrere Zeilen für mehrere Variablen\ndf[1:3, c(1, 3)]\n```\n\n### Indexierung mit logischen Werten\n\nMan kann einen logischen Vektor anstelle der Ganzzahlen-Indexierung verwenden, um bestimmte Elemente zu filtern.\n\n```{r}\n# Alter der Beobachtung mit id == 3\ndf$age[df$id == 3]\n\n# Notenwerte für Schüler mit Alter zwischen 25 und 35\ndf$grade[df$age >= 25 & df$age < 35]\n```\n\n## Einfache Funktionen\n\nMan ist oft an bestimmten Eigenschaften der Daten interessiert. Funktionen wie `sum()`, `mean()` und `sd()` sind hierbei nützlich. Im Verlaufe des Semesters werden wir noch mehr solche Funktionen kennenlernen. \n```{r}\n# Summe des Alters\nmean(df$age)\n```\n\nWie wir oben gesehen haben, enthält die Variable `age` fehlende Werte. Um den Mittelwert der nicht fehlenden Werte zu berechnen, müssen wir deshalb das Argument `na.rm = TRUE` hinzufügen:\n\n\n```{r}\n# Mittelwert des Alters\nmean(df$age, na.rm = TRUE)\n\n# Summe des Alters\nsum(df$age, na.rm = TRUE)\n\n# Standardabweichung des Alters\nsd(df$age, na.rm = TRUE)\n```\n\n## Werte zurücksetzen, neue Spalten oder Zeilen hinzufügen\n\n### Werte zurücksetzen\n\nFehler in den Daten können einfach korrigiert werden.\n\n```{r}\n# Setzt das Alter für id == 1 auf den Wert 40\ndf$age[df$id == 1] <- 40\nprint(df)\n```\n\n### Spalten hinzufügen\n\nNeue Variablen können leicht hinzugefügt werden.\n\n```{r}\n# Neue Variable 'gender' hinzufügen\ngender <- c('F', 'F', 'M', 'M', 'M', 'F')\ndf$gender <- gender\n\n# Alternativ mit add_column\ndf <- add_column(df, gender_new = gender)\n\n# Variable entfernen\ndf <- select(df, -gender_new)\nprint(df)\n```\n\n### Zeilen hinzufügen\n\nNeue Beobachtungen können mit der Funktion `add_row()` hinzugefügt werden.\n\n```{r}\n# Neue Zeile hinzufügen\ndf <- add_row(df, id = 7, age = 25, grade = 'C+', gender = 'M')\nprint(df)\n\n# Zeile entfernen\n# df$id != 7 generiert den folgenden Vektor: TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE, der die Grundlage für die Indizierung bildet\ndf <- df[df$id != 7, ]\nprint(df)\n```\n\n\n\n\n\n## Tidy Data\n\nTidy Data ist ein Konzept in der Datenanalyse, das sicherstellt, dass Daten in einem klaren und konsistenten Format vorliegen. In Tidy Data hat jede Variable ihre eigene Spalte, jede Beobachtung ihre eigene Zeile und jede Art von beobachteter Einheit bildet eine Tabelle. Dies erleichtert die Manipulation, Visualisierung und Modellierung der Daten.\n\n### Prinzipien des Tidy Data Ansatzes\n\n1. **Jede Variable hat ihre eigene Spalte.**\n2. **Jede Beobachtung hat ihre eigene Zeile.**\n3. **Jede Art von beobachteter Einheit bildet eine Tabelle.**\n\n\n```{r, echo=FALSE}\nknitr::include_graphics(\"_main_files/figure-html/clean_data.jpg\") \n```\n\n### Beispiel für Tidy Data\n\nSchauen wir uns ein Beispiel an, um die Prinzipien von Tidy Data zu verdeutlichen:\n\n```{r}\n# Erstellen eines Tidy Data Tibble\ntidy_data <- tibble(\n  country = c('Afghanistan', 'Brazil', 'China', 'Afghanistan', 'Brazil', 'China'),\n  year = c(1999, 1999, 1999, 2000, 2000, 2000),\n  value = c(745, 37737, 212258, 2666, 80488, 213766)\n)\n\n# Daten anzeigen\ntidy_data\n```\n\n### Beispiel für Nicht-Tidy Data\n\nIm Gegensatz dazu sehen Nicht-Tidy Data oft unorganisiert aus und erschweren die Analyse. Hier ist ein Beispiel für Nicht-Tidy Data, das dem Datensatz `table4a` ähnelt:\n\n```{r}\n# Erstellen eines Nicht-Tidy Data Frames\nnon_tidy_data <- tibble(\n  country = c('Afghanistan', 'Brazil', 'China'),\n  `1999` = c(745, 37737, 212258),\n  `2000` = c(2666, 80488, 213766)\n)\n\n# Daten anzeigen\nnon_tidy_data\n```\n\n\n### Umwandeln von Nicht-Tidy Data in Tidy Data\n\nUm Nicht-Tidy Data in Tidy Data zu konvertieren, kann man die Funktion `pivot_longer()` verwenden. Hier zeigen wir, wie man dies erreicht:\n\n#### Beispiel für Weites Format zu Langem Format\n\n```{r}\n# Nicht-Tidy Data in Tidy Data umwandeln (Weit zu Lang)\ntidy_from_non_tidy <- pivot_longer(non_tidy_data, \n                                   cols = c(`1999`, `2000`),\n                                   names_to = \"year\",\n                                   values_to = \"value\")\n\n# Daten anzeigen\ntidy_from_non_tidy\n```\n\nMit diesen Prinzipien und Techniken können Sie sicherstellen, dass Ihre Daten stets im Tidy Format vorliegen, was die Datenanalyse erheblich erleichtert. Leider kommt \"non-tidy data\" in alle Farben und Formen. Deshalb gibt es kein einfaches Rezept, wie man von nicht-tidy zu tidy Data kommt. Wir werden aber im Verlauf des Semesters (vor allem im nächsten Kapitel) Funktionen kennenlernen, die dafür hilfreich sind.\n\n```{r, echo=FALSE}\nknitr::include_graphics(\"_main_files/figure-html/bad_data.jpg.webp\") \n```\n\n\nDurch das Verständnis dieser grundlegenden Operationen können Sie Daten in R effizient verwalten und analysieren.","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"kable","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":false,"code-overflow":"wrap","code-link":true,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"html-table-processing":"none"},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","filters":["panelize","webr"],"css":["include/psyteachr.css","include/webex.css","include/style.css"],"highlight-style":"a11y","include-after-body":["include/webex.js","include/script.js"],"output-file":"05-tibbles.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.555","bibliography":["include/book.bib","include/packages.bib"],"csl":"include/apa.csl","webr":{"packages":["tidyverse"]},"theme":{"light":["flatly","include/light.scss"],"dark":["darkly","include/dark.scss"]},"code-copy":"hover"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}